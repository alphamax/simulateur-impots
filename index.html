<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Simulateur d'impôts sur le revenu</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
  </head>
  <body>
    <header>
      <div class="navbar navbar-dark bg-dark box-shadow">
        <div class="container">
          <strong class="navbar-brand"
            >Simulateur d'impôts sur le revenu</strong
          >
        </div>
      </div>
    </header>

    <div id="app" class="container">
      <h2>Situation :</h2>

      <div class="input-group">
        <div class="input-group-prepend">
          <label class="input-group-text">Vous déclarez vos impôts :</label>
        </div>
        <select class="custom-select" v-model.number="etatcivil">
          <option value="1">seul</option>
          <option value="2">en couple (mariage / PACS)</option>
        </select>
      </div>

      <div class="input-group">
        <div class="input-group-prepend">
          <label class="input-group-text" for="nbEnfants">
            Nombre d'enfants à charge :
          </label>
        </div>
        <input
          type="number"
          v-model.number="nbEnfants"
          id="nbEnfants"
          class="form-control"
        />
      </div>

      <div class="input-group">
        <div class="input-group-prepend">
          <label class="input-group-text" for="nbEnfants">
            Nombre de parts :
          </label>
        </div>
        <input type="number" class="form-control" v-model="parts" readonly/>
      </div>

      <h2>Revenus :</h2>

      <div>
        <h3>Traitements, salaires</h3>

        <input
          type="range"
          v-model.number="salaire.montant"
          min="0"
          max="120000"
          step="600"
        />
        <input type="number" step="600" v-model.number="salaire.montant" /> ({{
          Math.round(salaire.montant / 12)
        }}
        €/mois)
      </div>

      <div>
        <h3>Revenus fonciers</h3>

        <input
          type="range"
          v-model.number="foncier.montant"
          min="0"
          max="15000"
          step="600"
        />
        <input type="number" step="600" v-model.number="foncier.montant" /> ({{
          Math.round(foncier.montant / 12)
        }}
        €/mois)
      </div>

      <div>
        <h3>Dividendes</h3>

        <input
          type="range"
          v-model.number="dividendes.montant"
          min="0"
          max="100000"
          step="500"
        />
        <input type="number" step="500" v-model.number="dividendes.montant" />
      </div>
      <!--
        <table>
          <thead>
            <td>Type de revenu</td>
            <td>Total annuel</td>
            <td>Imposable après abattement</td>
          </thead>
          <tr v-for="revenu in revenus">
            <td>{{ revenu.type }}</td>
            <td><input type="number" v-model="revenu.montant" step="0.01" /></td>
            <td>{{ revenu.montantImposable() }}</td>
          </tr>
        </table>
      -->

      <h2>Impots sur le revenu</h2>
      <dl>
        <dt>Total des revenus sur l'année</dt>
        <dd>{{ revenusTotaux }} €</dd>
        <dt>Revenu fiscal de référence</dt>
        <dd>{{ totalImposable }} €</dd>
        <dt>Total impôt</dt>
        <dd>
          {{ montantTotalImpot }} € ({{
            (montantTotalImpot / 12).toFixed(2)
          }}
          €/mois)
        </dd>
        <dt>Taux marginal</dt>
        <dd>{{ tauxMarginal }} %</dd>
        <dt>Pourcentage prélèvement</dt>
        <dd>{{ pourcentagePrelevement.toFixed(1) }} %</dd>
      </dl>

      <h2 v-if="montantTotalCsg">Prélèvements sociaux</h2>
      <dl v-if="montantTotalCsg">
        <dt>Revenus imposables à la CSG</dt>
        <dd>{{ totalImposableCsg }} €</dd>
        <dt>Total CSG</dt>
        <dd>
          {{ montantTotalCsg }} € ({{
            (montantTotalCsg / 12).toFixed(2)
          }}
          €/mois)
        </dd>
      </dl>
    </div>

    <script src="vue/vue.js"></script>
    <script src="revenus.js"></script>
    <script src="impots.js"></script>
  </body>
</html>
